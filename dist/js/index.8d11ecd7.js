(function(t){function e(e){for(var a,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={index:0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("9e0e")},"053d":function(t,e,s){"use strict";s("3490")},1932:function(t,e,s){},"1a33":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-row"},[s("div",{staticClass:"col"},[s("form",[t._l(t.fields,(function(e){return s("Field",t._b({key:t.fields[0].default+e.name,ref:e.name,refInFor:!0,attrs:{plugins:t.plugins},on:{updated:t.clearStatus}},"Field",e,!1))})),t.klass?[t.error?s("div",{staticClass:"row my-3"},[s("div",{staticClass:"col-4 text-danger"},[t._v("Fehler:")]),s("div",{staticClass:"col-8 text-danger"},[t._v(" "+t._s(t.error)+" ")])]):t._e(),s("button",{staticClass:"btn btn-primary btn-small",attrs:{type:"submit"},on:{click:t.test}},[t._v(" Test ")]),Object.keys(t.result).length?s("ul",t._l(t.result,(function(e,a){return s("li",{key:a},[t._v(" "+t._s(a)+": "),e.error?s("span",[t._v(t._s(e.error))]):s("span",[t._v(t._s(e.value))])])})),0):t._e()]:t._e()],2)])])},i=[],n=s("bc3a"),r=s.n(n),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-row"},[s("label",{staticClass:"col-4 col-form-label",attrs:{for:t.name}},[t._v(t._s(t.label))]),"plugin"==t.type?s("div",{staticClass:"col-8"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.plugin,expression:"plugin"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.plugin=e.target.multiple?s:s[0]}}},[t.required?t._e():s("option",{attrs:{value:""}},[t._v("- bitte wählen -")]),t._l(t.plugins,(function(e,a){return s("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(e.label)+" ")])}))],2),t.plugins[t.plugin]?s("FieldSet",t._b({ref:"sub",attrs:{plugins:t.plugins,klass:"plugin"}},"FieldSet",t.plugins[t.plugin],!1)):t._e()],1):"slice"==t.type?s("div",{staticClass:"col-8"},[s("FieldSet",{ref:"sub",attrs:{fields:t.sliceFields,plugins:t.plugins,klass:"plugin"}})],1):"struct"==t.type?s("div",{staticClass:"col-8"},[s("FieldSet",{ref:"sub",attrs:{fields:t.children,plugins:t.plugins}})],1):s("div",{staticClass:"col-8"},[t.isEnum?s("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.value=e.target.multiple?s:s[0]}}},[t.required?t._e():s("option",{attrs:{value:""}},[t._v("- bitte wählen -")]),t._l(t.enums,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2):"text"==t.type?s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}):"password"==t.type?"checkbox"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{name:t.name,autocomplete:"current-password",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{change:function(e){var s=t.value,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=t._i(s,n);a.checked?r<0&&(t.value=s.concat([n])):r>-1&&(t.value=s.slice(0,r).concat(s.slice(r+1)))}else t.value=i}}}):"radio"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{name:t.name,autocomplete:"current-password",type:"radio"},domProps:{checked:t._q(t.value,null)},on:{change:function(e){t.value=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{name:t.name,autocomplete:"current-password",type:t.inputType},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}):t.isBool?"checkbox"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"form-control",attrs:{name:t.name,type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var s=t.checked,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=t._i(s,n);a.checked?r<0&&(t.checked=s.concat([n])):r>-1&&(t.checked=s.slice(0,r).concat(s.slice(r+1)))}else t.checked=i}}}):"radio"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"form-control",attrs:{name:t.name,type:"radio"},domProps:{checked:t._q(t.checked,null)},on:{change:function(e){t.checked=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"form-control",attrs:{name:t.name,type:t.inputType},domProps:{value:t.checked},on:{input:function(e){e.target.composing||(t.checked=e.target.value)}}}):"checkbox"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{step:t.inputStep,name:t.name,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{change:function(e){var s=t.value,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=t._i(s,n);a.checked?r<0&&(t.value=s.concat([n])):r>-1&&(t.value=s.slice(0,r).concat(s.slice(r+1)))}else t.value=i}}}):"radio"===t.inputType?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{step:t.inputStep,name:t.name,type:"radio"},domProps:{checked:t._q(t.value,null)},on:{change:function(e){t.value=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{step:t.inputStep,name:t.name,type:t.inputType},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])])},l=[],c={name:"Field",components:{FieldSet:()=>Promise.resolve().then(s.bind(null,"1a33"))},props:{type:String,name:String,label:String,length:Number,required:Boolean,enum:Array,default:[String,Number,Boolean],children:Array,plugins:Array},data:function(){let t=!1!==this.default?this.default:"";return this.enum&&this.enum.length&&this.required&&""===t&&(t=this.enum[0]),{plugin:"",value:t,checked:!!this.isBool&&this.default}},watch:{value:function(){this.$emit("updated")}},computed:{enums:function(){return this.enum},isEnum:function(){return"undefined"!==typeof this.enum&&typeof this.enum.length},isBool:function(){return"bool"==this.type},isSimple:function(){return!("struct"==this.type||"slice"==this.type||"plugin"==this.type)},inputType:function(){switch(this.type){case"string":return"text";case"duration":return"number";case"bool":return"checkbox";case"duration":return"text";default:return/int|float/.test(this.type)?"number":this.type}},inputStep:function(){return"number"==this.inputType?"any":""},sliceFields:function(){let t=[],e=this.length?this.length:1;for(let s=0;s<e;s++)t.push({type:"plugin",label:""+(t.length+1),name:""+t.length});return t}},methods:{values:function(){if("duration"==this.type)return this.value?this.value:0;if(this.isSimple)return this.isBool?this.checked:this.value;if("slice"==this.type){let t=[],e=this.$refs.sub.values();for(let a in e)t.push(e[a]);let s=t.reduce((t,e)=>t||null!==e);return this.required||s?t:null}let t=this.$refs.sub;return void 0===t?null:t.values()}}},u=c,d=s("2877"),p=Object(d["a"])(u,o,l,!1,null,null,null),m=p.exports,v={name:"FieldSet",components:{Field:m},props:{klass:String,fields:Array,plugins:Array},data:function(){return{error:"",result:{}}},methods:{values:function(){let t={};for(let e in this.$refs)if(this.$refs[e].length){let s=this.$refs[e][0],a=s.values();void 0!==a&&(t[s.name]=a)}return t},test:async function(t){t.preventDefault(),this.clearStatus();const e=this.values();try{let t=await r.a.post("config/test/"+this.klass,e);this.result=t.data}catch(t){t.response&&(this.error=t.response.data)}},clearStatus:function(){this.result={},this.error=""}}},h=v,f=Object(d["a"])(h,a,i,!1,null,null,null);e["default"]=f.exports},2693:function(t,e,s){"use strict";s("c73a")},3490:function(t,e,s){},"61f9":function(t,e,s){"use strict";s("1932")},6953:function(t,e,s){},"6fe5":function(t,e,s){"use strict";s("6953")},9289:function(t,e,s){"use strict";s("d68a")},"973e":function(t,e,s){"use strict";s("b557")},"9e0e":function(t,e,s){"use strict";s.r(e);s("b19f"),s("ab8b"),s("4989");var a=s("2b0e"),i=s("bc3a"),n=s.n(i),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("div",{staticClass:"container"},[s("a",{staticClass:"navbar-brand",attrs:{href:"https://github.com/andig/evcc"}},[s("fa-icon",{staticClass:"text-primary mr-2",attrs:{icon:"leaf"}}),t._v("evcc")],1),t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNavAltMarkup"}},[s("div",{staticClass:"navbar-nav"},[s("router-link",{staticClass:"nav-item nav-link pb-1",attrs:{to:"/"}},[t._v("Laden")]),s("router-link",{staticClass:"nav-item nav-link pb-1",attrs:{to:"/setup"}},[t._v("Konfiguration")]),s("router-link",{staticClass:"nav-item nav-link pb-1",attrs:{to:"/testing"}},[t._v("Testing")]),s("a",{staticClass:"nav-item nav-link pb-1",attrs:{href:"https://github.com/andig/evcc/discussions",target:"_blank"}},[t._v("Community Support")])],1)])])]),s("Version",{attrs:{installed:t.installedVersion,available:t.store.state.availableVersion,releaseNotes:t.store.state.releaseNotes,hasUpdater:t.store.state.hasUpdater,uploadMessage:t.store.state.uploadMessage,uploadProgress:t.store.state.uploadProgress}}),s("router-view")],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],l=s("ad3d"),c=s("ecee"),u=s("a206"),d=s("9e52"),p=s("8475"),m=s("39f0"),v=s("8718"),h=s("7c8d"),f=s("c6b3"),g=s("8668"),b=s("a14b"),_=s("c074"),C=s("8560"),y=s("bf13"),w=s("af2b"),x=s("f303"),k=s("7116"),S=s("fdca");c["c"].add(u["faArrowDown"],d["faArrowUp"],p["faBatteryEmpty"],m["faBatteryFull"],v["faBatteryHalf"],h["faBatteryQuarter"],f["faBatteryThreeQuarters"],g["faChevronDown"],b["faChevronUp"],_["a"],C["faExclamationTriangle"],y["faLeaf"],w["faSun"],x["faTemperatureHigh"],k["faTemperatureLow"],S["faThermometerHalf"]),a["a"].component("fa-icon",l["a"]);var T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[t.active?s("div",[s("div",{staticClass:"row p-3 bg-warning"},[s("div",{staticClass:"col-12"},[t._v(" Neue Version verfügbar! Installiert: "+t._s(t.installed)+". Verfügbar: "+t._s(t.available)+". "),t.releaseNotes?s("b",{staticClass:"px-3"},[s("a",{staticClass:"text-body",attrs:{href:"#"},on:{click:t.toggleReleaseNotes}},[t._v(" Release notes "),s("fa-icon",{staticClass:"expand-icon",class:{"expand-icon-rotated":t.releaseNotesShown},attrs:{icon:"chevron-down"}})],1)]):t._e(),s("b",{staticClass:"px-3"},[t.hasUpdater?s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#updateModal"},on:{click:t.toggleUpdater}},[t._v(" Aktualisieren ")]):s("a",{staticClass:"text-body",attrs:{href:"https://github.com/andig/evcc/releases/tag/"+t.available}},[t._v(" Download "),s("fa-icon",{attrs:{icon:"chevron-down"}})],1)]),s("button",{staticClass:"close float-right",staticStyle:{"margin-top":"-2px"},attrs:{type:"button","aria-label":"Close"},on:{click:t.dismiss}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])]),s("transition",{attrs:{name:"fade"}},[t.releaseNotesShown?s("div",{staticClass:"row p-3 bg-light"},[s("div",{staticClass:"col-12",domProps:{innerHTML:t._s(t.releaseNotes)}})]):t._e()]),s("transition",{attrs:{name:"display"}},[t.updaterShown?s("div",{staticClass:"dialog",attrs:{id:"updateModal",tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title font-weight-bold"},[t._v(" Aktualisierung durchführen ")]),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.toggleUpdater}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("p",{staticClass:"font-weight-bold"},[t._v(" Nach Aktualisierung wird evcc neu gestartet. ")]),t.updateStarted?s("div",{staticClass:"progress",staticStyle:{"margin-top":"16px","margin-bottom":"16px"}},[s("div",{staticClass:"progress-bar",style:{width:t.uploadProgress+"%"},attrs:{role:"progressbar"}})]):t._e(),s("p",[t._v(t._s(t.updateStatus)+t._s(t.uploadMessage))])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",class:{disabled:t.updateStarted},attrs:{type:"button"},on:{click:t.toggleUpdater}},[t._v(" Abbrechen ")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.update}},[t._v(" Installieren ")])])])])]):t._e()])],1):t._e()])},M=[],D={name:"Version",props:{installed:String,available:String,releaseNotes:String,hasUpdater:Boolean,uploadMessage:String,uploadProgress:Number},data:function(){return{dismissed:!1,releaseNotesShown:!1,updaterShown:!1,updateStarted:!1,updateStatus:""}},methods:{dismiss:function(){this.dismissed=!0},toggleReleaseNotes:function(t){t.preventDefault(),this.releaseNotesShown=!this.releaseNotesShown},toggleUpdater:function(t){t.preventDefault(),this.updateStarted||(this.updaterShown=!this.updaterShown)},update:async function(){try{await n.a.post("update"),this.updateStatus="Aktualisierung gestartet: ",this.updateStarted=!0}catch(t){this.updateStatus="Aktualisierung nicht möglich: "+t}}},computed:{active:function(){return this.available&&"[[.Version]]"!=this.installed&&"0.0.1-alpha"!=this.installed&&this.available!=this.installed&&!1===this.dismissed}},watch:{available:function(){this.dismissed=!1,this.releaseNotesShown=!1}}},P=D,E=(s("9289"),s("2877")),N=Object(E["a"])(P,T,M,!1,null,"4b17e482",null),j=N.exports;function A(t,e,s){const i=e.shift();t[i]||a["a"].set(t,i,{}),e.length?A(t[i],e,s):s&&"object"===typeof s&&!Array.isArray(s)?t[i]={...t[i],...s}:t[i]=s}const L={state:{loadpoints:[]},update:function(t){Object.keys(t).forEach((function(e){"function"===typeof window.toasts[e]?window.toasts[e]({message:t[e]}):A(L.state,e.split("."),t[e])}))}};var B=L,F={name:"App",components:{Version:j},data:function(){return{compact:!1,store:this.$root.$data.store,installedVersion:window.evcc.version}},methods:{connect:function(){const t=window.location,e="https:"==t.protocol?"wss:":"ws:",s=e+"//"+t.hostname+(t.port?":"+t.port:"")+t.pathname+"ws",a=new WebSocket(s),i=this;a.onerror=function(){a.close()},a.onclose=function(){window.setTimeout(i.connect,1e3)},a.onmessage=function(t){try{var e=JSON.parse(t.data);B.update(e)}catch(s){window.toasts.error(s,t.data)}}}},created:function(){const t=new URLSearchParams(window.location.search);this.compact=t.get("compact"),this.connect()}},$=F,V=Object(E["a"])($,r,o,!1,null,null,null),O=V.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"absolute",top:"4rem",right:"0.5rem"},attrs:{"aria-atomic":"true"}},t._l(t.items,(function(t){return s("ToastMessage",{key:t.id,attrs:{item:t,id:"message-id-"+t.id}})})),1)},I=[],U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toast",attrs:{"data-delay":"10000","data-autohide":!0}},[s("div",{staticClass:"toast-header"},["warn"!=t.item.type?s("strong",{staticClass:"mr-auto"},[s("fa-icon",{staticClass:"text-danger",attrs:{icon:"exclamation-triangle"}}),t._v(" Error")],1):t._e(),"warn"==t.item.type?s("strong",{staticClass:"mr-auto"},[s("fa-icon",{staticClass:"text-warning",attrs:{icon:"exclamation-triangle"}}),t._v(" Warning")],1):t._e(),t.item.status?s("small",[t._v("HTTP "+t._s(t.item.status))]):t._e(),t._m(0)]),s("div",{staticClass:"toast-body"},[t._v(t._s(t.item.message))])])},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],q=s("1157"),H=s.n(q),R={name:"ToastMessage",props:["item"],mounted:function(){const t="#message-id-"+this.item.id;H()(t).toast("show"),H()(t).on("hidden.bs.toast",function(){window.toasts.remove(this.item)}.bind(this))}},K=R,G=Object(E["a"])(K,U,W,!1,null,null,null),Z=G.exports,J={name:"Toasts",components:{ToastMessage:Z},props:{items:Object}},Q=J,X=Object(E["a"])(Q,z,I,!1,null,null,null),Y=X.exports,tt=s("8c4f"),et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.configured?s("Site",t._b({},"Site",t.state,!1)):s("div",[s("div",{staticClass:"row py-5"},[s("div",{staticClass:"col12"},[s("p",{staticClass:"h1 pt-5 pb-2 border-bottom"},[t._v("Willkommen bei evcc")]),s("p",{staticClass:"lead pt-2"},[s("b",[t._v("evcc")]),t._v(" ist dient zur flexiblen Ladesteuerung von Elektrofahrzeugen. ")]),s("p",{staticClass:"pt-2"},[t._v(" Es sieht aus, als wäre Dein "),s("b",[t._v("evcc")]),t._v(" noch nicht konfiguriert. Um "),s("b",[t._v("evcc")]),t._v(" zu konfigurieren sind die folgenden Schritte notwendig: ")]),s("ol",{staticClass:"pt-2"},[s("li",[t._v(" Erzeugen einer Konfigurationsdatei mit Namen "),s("code",[t._v("evcc.yaml")]),t._v(". Die Standardkonfiguration "),s("code",[t._v("evcc.dist.yaml")]),t._v(" kann dafür als Vorlage dienen ("),s("a",{attrs:{href:"https://github.com/andig/evcc/blob/master/evcc.dist.yaml"}},[t._v("Download")]),t._v("). ")]),s("li",[t._v("Konfiguration der Wallbox als "),s("code",[t._v("chargers")]),t._v(".")]),s("li",[t._v(" Konfiguration des EVU Zählers und evtl. weiterer Zähler unter "),s("code",[t._v("meters")]),t._v(". ")]),s("li",[t._v(" Konfiguration des Netzanschlusses unter "),s("code",[t._v("site")]),t._v(". In einer Site wird der Netzanschluss mit dem konfigurierten EVU Zähler ("),s("code",[t._v("meter")]),t._v(") verbunden. ")]),s("li",[t._v(" Konfiguration eines Ladepunktes unter "),s("code",[t._v("loadpoints")]),t._v(". In einem Ladepunkt wird die konfigurierte Wallbox ("),s("code",[t._v("charger")]),t._v(") mit dem Ladepunkt verbunden. ")]),s("li",[t._v(" Start von "),s("b",[t._v("evcc")]),t._v(" mit der neu erstellten Konfiguration: "),s("code",[t._v("evcc -c evcc.yaml")])])]),s("p",[t._v("Minimale Beispielkonfiguration für "),s("b",[t._v("evcc")]),t._v(":")]),s("p",[s("code",[s("pre",{staticClass:"mx-3"},[t._v("                uri: localhost:7070 # Adresse für UI\n                interval: 10s # Regelintervall\n                meters:\n                - name: evu-zähler\n                type: ... # Detailkonfiguration des EVU Zählers\n                - name: ladezähler\n                type: ... # Detailkonfiguration des Ladezählers (optional)\n                chargers:\n                - name: wallbox\n                type: ... # Detailkonfiguration der Wallbox\n                site:\n                  title: Home\n                  meters:\n                  grid: evu-zähler # EVU Zähler\n                loadpoints:\n                - title: Ladepunkt # ui display name\n                  charger: wallbox # charger\n                  meters:\n                    charge: ladezähler # Ladezählers (optional)\n              ")])])]),s("p",[t._v(" Viel Spass mit "),s("b",[t._v("evcc")]),t._v("! Bei Problemen kannst Du uns auf "),s("a",{attrs:{href:"https://github.com/andig/evcc/issues"}},[t._v("GitHub")]),t._v(" erreichen. ")])])])])],1)},st=[],at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"d-none d-md-flex col-12 col-md-4 mt-md-4 align-items-end"},[s("p",{staticClass:"h1"},[t._v(t._s(t.title||"Home"))])]),t.multi?s("div",{staticClass:"col-12 col-md-8 mt-md-4"},[s("SiteDetails",t._b({},"SiteDetails",t.details,!1))],1):t._e()]),s("div",{staticClass:"row d-none d-md-flex border-bottom"}),t.multi?t._e():s("div",{staticClass:"row"},[s("div",{staticClass:"d-none d-md-block col-md-4"}),s("div",{staticClass:"col-12 col-md-8"},[s("SiteDetails",t._b({},"SiteDetails",t.details,!1))],1)]),t._l(t.loadpoints,(function(e,a){return s("Loadpoint",t._b({key:a,attrs:{id:a,multi:t.multi,pvConfigured:t.pvConfigured}},"Loadpoint",e,!1))}))],2)},it=[],nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.gridConfigured?s("div",{staticClass:"col-6 col-md-3 mt-3"},[t.gridPower>0?s("div",{staticClass:"mb-2 value"},[t._v(" Bezug "),s("fa-icon",{staticClass:"text-primary",attrs:{icon:"arrow-down"}})],1):s("div",{staticClass:"mb-2 value"},[t._v(" Einspeisung "),s("fa-icon",{staticClass:"text-primary",attrs:{icon:"arrow-up"}})],1),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmt(t.gridPower))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtUnit(t.gridPower))+"W")])])]):t._e(),t.pvConfigured?s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v(" Erzeugung "),s("fa-icon",{class:{"text-primary":t.pvPower>0,"text-muted":t.pvPower<=0},attrs:{icon:"sun"}})],1),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmt(t.pvPower))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtUnit(t.pvPower))+"W")])])]):t._e(),t.batteryConfigured?s("div",{staticClass:"d-md-block col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v(" Batterie "),s("fa-icon",{staticClass:"text-primary",attrs:{icon:t.batteryIcon}})],1),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmt(t.batteryPower))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtUnit(t.batteryPower))+"W")]),s("small",{staticClass:"text-muted"},[t._v("/")]),t._v(" "+t._s(t.batterySoC)+" "),s("small",{staticClass:"text-muted"},[t._v("%")])])]):t._e()])},rt=[],ot={data:function(){return{fmtLimit:100,fmtDigits:1}},methods:{round:function(t,e){var s=10**e;return(Math.round(t*s)/s).toFixed(e)},fmt:function(t){return void 0===t||null===t?0:(t=Math.abs(t),t>=this.fmtLimit?this.round(t/1e3,this.fmtDigits):this.round(t,0))},fmtUnit:function(t){return Math.abs(t)>=this.fmtLimit?"k":""},fmtDuration:function(t){if(t<=0||null==t)return"—";var e="0"+t%60,s="0"+Math.floor(t/60)%60,a=""+Math.floor(t/3600);return a.length<2&&(a="0"+a),a+":"+s.substr(-2)+":"+e.substr(-2)},fmtShortDuration:function(t){if(t<=0||null==t)return"—";var e,s=Math.floor(t/60)%60,a=Math.floor(t/3600);if(a>=1)s="0"+s,e=a+":"+s.substr(-2);else{var i="0"+t%60;e=s+":"+i.substr(-2)}return e},fmtShortDurationUnit:function(t){if(t<=0||null==t)return"";var e=Math.floor(t/3600);return e>=1?"h":"m"}}};const lt=20,ct=["battery-empty","battery-quarter","battery-half","battery-three-quarters","battery-full"];var ut={name:"SiteDetails",props:{gridConfigured:Boolean,gridPower:Number,pvConfigured:Boolean,pvPower:Number,batteryConfigured:Boolean,batteryPower:Number,batterySoC:Number},data:function(){return{iconIdx:0}},mixins:[ot],computed:{batteryIcon:function(){return Math.abs(this.batteryPower)<lt?this.batterySoC<30?ct[0]:this.batterySoC<50?ct[1]:this.batterySoC<70?ct[2]:this.batterySoC<90?ct[3]:ct[4]:ct[this.iconIdx]}},mounted:function(){window.setInterval(()=>{this.batteryPower>lt?--this.iconIdx<0&&(this.iconIdx=ct.length-1):this.batteryPower<lt&&++this.iconIdx>=ct.length&&(this.iconIdx=0)},1e3)}},dt=ut,pt=Object(E["a"])(dt,nt,rt,!1,null,null,null),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.multi?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 d-md-flex mt-3 mt-md-5 align-items-end"},[s("span",{staticClass:"h1 align-bottom"},[t._v(t._s(t.title||"Ladepunkt"))])]),s("div",{staticClass:"col-12 col-md-8 d-none d-md-block mt-3 mt-md-5"},[s("LoadpointDetails",t._b({},"LoadpointDetails",t.details,!1))],1),s("div",{staticClass:"col-12 d-md-none"},[s("div",{staticClass:"row mt-3 pb-3 bg-light"},[s("div",{staticClass:"col-12 mt-3"},[s("Mode",{staticClass:"w-100",attrs:{mode:t.mode,pvConfigured:t.pvConfigured},on:{updated:t.setTargetMode}})],1),t.hasTargetSoC?s("div",{staticClass:"col-12 mt-3"},[s("Soc",{staticClass:"w-100",attrs:{soc:t.targetSoC,levels:t.socLevels},on:{updated:t.setTargetSoC}})],1):t._e()])])]):t._e(),t.multi?t._e():s("div",{staticClass:"row d-none d-md-flex mt-5 py-3 pb-4 text-center bg-light"},[s("div",{staticClass:"mt-3",class:{"col-md-6":t.hasTargetSoC,"col-md-12":!t.hasTargetSoC}},[s("Mode",{attrs:{mode:t.mode,pvConfigured:t.pvConfigured,caption:!0},on:{updated:t.setTargetMode}})],1),t.hasTargetSoC?s("div",{staticClass:"col-md-6 mt-3"},[s("Soc",{attrs:{soc:t.targetSoC,levels:t.socLevels,caption:!0},on:{updated:t.setTargetSoC}})],1):t._e()]),t.multi?t._e():s("div",{staticClass:"row d-md-none mt-2 pb-3 bg-light"},[s("div",{staticClass:"col-12 mt-3"},[s("Mode",{staticClass:"w-100",attrs:{mode:t.mode,pvConfigured:t.pvConfigured},on:{updated:t.setTargetMode}})],1),t.hasTargetSoC?s("div",{staticClass:"col-12 mt-3"},[s("Soc",{staticClass:"w-100",attrs:{soc:t.targetSoC,levels:t.socLevels},on:{updated:t.setTargetSoC}})],1):t._e()]),t.multi?t._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 d-none d-md-flex mt-3 mt-md-5"},[s("span",{staticClass:"h1"},[t._v(t._s(t.title||"Ladepunkt"))])]),t.remoteDisabled?s("div",{staticClass:"col-12 col-md-8 d-flex d-md-flex mt-3 mt-md-5 pt-3"},[s("h5",{staticClass:"w-100"},["soft"==t.remoteDisabled?s("span",{staticClass:"badge badge-warning w-100"},[t._v(" "+t._s(t.remoteDisabledSource)+": Adaptives PV-Laden deaktiviert ")]):t._e(),"hard"==t.remoteDisabled?s("span",{staticClass:"badge badge-danger w-100"},[t._v(" "+t._s(t.remoteDisabledSource)+": Deaktiviert ")]):t._e()])]):t._e()]),s("div",{staticClass:"row border-bottom d-none d-md-block"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-4 mt-3 mb-3 mb-md-0"},[s("Vehicle",t._b({},"Vehicle",t.vehicle,!1))],1),t.multi?s("div",{staticClass:"col-12 col-md-4 d-none d-md-block mt-3"},[s("div",{staticClass:"mb-2"},[t._v("Modus")]),s("Mode",{staticClass:"btn-group-sm",attrs:{mode:t.mode,pvConfigured:t.pvConfigured},on:{updated:t.setTargetMode}})],1):t._e(),t.multi&&t.hasTargetSoC?s("div",{staticClass:"col-12 col-md-4 d-none d-md-block mt-3"},[s("div",{staticClass:"mb-2"},[t._v("Ladeziel")]),s("Soc",{staticClass:"btn-group-sm",attrs:{soc:t.targetSoC,levels:t.socLevels},on:{updated:t.setTargetSoC}})],1):t._e(),t.multi?t._e():s("div",{staticClass:"col-md-8 d-none d-md-block"},[s("LoadpointDetails",t._b({},"LoadpointDetails",t.details,!1))],1),s("div",{staticClass:"col-12 d-md-none"},[s("LoadpointDetails",t._b({},"LoadpointDetails",t.details,!1))],1)])])},ht=[],ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group btn-group-toggle bg-white shadow-none"},[t.caption?s("label",{staticClass:"btn btn-outline-primary disabled caption font-weight-bold"},[t._v(" Ladeziel ")]):t._e(),t._l(t.levelsOrDefault,(function(e,a){return s("label",{key:a,staticClass:"btn btn-outline-primary",class:{active:t.soc==e,first:!t.caption&&0==a},attrs:{level:e,id:a}},[s("input",{attrs:{type:"radio"},domProps:{value:e},on:{click:function(s){return t.setTargetSoC(e)}}}),t._v(t._s(e)+"% ")])}))],2)},gt=[],bt={name:"Soc",props:{soc:Number,caption:Boolean,levels:Array},computed:{levelsOrDefault:function(){return null==this.levels||0==this.levels.length?[]:this.levels}},methods:{setTargetSoC:function(t){this.$emit("updated",t)}}},_t=bt,Ct=Object(E["a"])(_t,ft,gt,!1,null,null,null),yt=Ct.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group btn-group-toggle bg-white shadow-none"},[t.caption?s("label",{staticClass:"btn btn-outline-primary value disabled caption font-weight-bold"},[t._v(" Modus ")]):t._e(),s("label",{staticClass:"btn btn-outline-primary",class:{active:"off"==t.mode,first:!t.caption}},[s("input",{attrs:{type:"radio",value:"off"},on:{click:function(e){return t.setTargetMode("off")}}}),t._v("Stop ")]),s("label",{staticClass:"btn btn-outline-primary",class:{active:"now"==t.mode}},[s("input",{attrs:{type:"radio",value:"now"},on:{click:function(e){return t.setTargetMode("now")}}}),t._v("Sofort ")]),t.pvConfigured?s("label",{staticClass:"btn btn-outline-primary",class:{active:"minpv"==t.mode}},[s("input",{attrs:{type:"radio",value:"minpv"},on:{click:function(e){return t.setTargetMode("minpv")}}}),s("span",{staticClass:"d-inline d-lg-none"},[t._v("Min")]),s("span",{staticClass:"d-none d-lg-inline"},[t._v("Min + PV")])]):t._e(),t.pvConfigured?s("label",{staticClass:"btn btn-outline-primary",class:{active:"pv"==t.mode}},[s("input",{attrs:{type:"radio",value:"pv"},on:{click:function(e){return t.setTargetMode("pv")}}}),s("span",{staticClass:"d-inline d-md-none"},[t._v("PV")]),s("span",{staticClass:"d-none d-md-inline"},[t._v("Nur PV")])]):t._e()])},xt=[],kt={name:"Mode",props:{mode:String,pvConfigured:Boolean,caption:Boolean},methods:{setTargetMode:function(t){this.$emit("updated",t)}}},St=kt,Tt=Object(E["a"])(St,wt,xt,!1,null,null,null),Mt=Tt.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"mb-2"},[t._v(t._s(t.socTitle||"Fahrzeug"))]),s("div",{staticClass:"progress",staticStyle:{height:"24px","font-size":"100%","margin-top":"16px"}},[s("div",{staticClass:"progress-bar",class:{"progress-bar-striped":t.charging,"progress-bar-animated":t.charging,"bg-light":!t.connected,"text-secondary":!t.connected,"bg-warning":t.connected&&t.minSoCActive},style:{width:t.socChargeDisplayWidth+"%"},attrs:{role:"progressbar"}},[t._v(" "+t._s(t.socChargeDisplayValue)+" ")]),t.minSoCActive&&t.socChargeDisplayWidth<100?s("div",{staticClass:"progress-bar",class:{"progress-bar-striped":t.charging,"progress-bar-animated":t.charging,"bg-warning":!0,"bg-muted":!0},style:{width:t.minSoCRemainingDisplayWidth+"%"},attrs:{role:"progressbar"}}):t._e()])])},Pt=[],Et={name:"Vehicle",props:{socTitle:String,connected:Boolean,charging:Boolean,hasVehicle:Boolean,socCharge:Number,minSoC:Number},computed:{socChargeDisplayWidth:function(){return this.hasVehicle&&this.socCharge>=0?this.socCharge:100},socChargeDisplayValue:function(){if(!this.hasVehicle||this.socCharge<0){let t="getrennt";return this.charging?t="laden":this.connected&&(t="verbunden"),t}let t=this.socCharge;return t>=10&&(t+="%"),t},minSoCActive:function(){return this.minSoC>0&&this.socCharge<this.minSoC},minSoCRemainingDisplayWidth:function(){return this.minSoC-this.socCharge}}},Nt=Et,jt=Object(E["a"])(Nt,Dt,Pt,!1,null,null,null),At=jt.exports,Lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v(" Leistung "),t.socTimerActive?s("fa-icon",{staticClass:"text-primary ml-1",attrs:{icon:"clock"}}):t.socTimerSet?s("fa-icon",{staticClass:"text-secondary ml-1",attrs:{icon:"clock"}}):t._e(),"heating"==t.climater?s("fa-icon",{staticClass:"text-primary ml-1",attrs:{icon:"temperature-low"}}):t._e(),"cooling"==t.climater?s("fa-icon",{staticClass:"text-primary ml-1",attrs:{icon:"temperature-high"}}):t._e(),"on"==t.climater?s("fa-icon",{staticClass:"text-primary ml-1",attrs:{icon:"thermometer-half"}}):t._e()],1),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmt(t.chargePower))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtUnit(t.chargePower))+"W")])])]),s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v("Geladen")]),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmt(t.chargedEnergy))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtUnit(t.chargedEnergy))+"Wh")])])]),t.range>=0?s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v("Reichweite")]),s("h2",{staticClass:"value"},[t._v(" "+t._s(Math.round(t.range))+" "),s("small",{staticClass:"text-muted"},[t._v("km")])])]):s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v("Dauer")]),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmtShortDuration(t.chargeDuration))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtShortDurationUnit(t.chargeDuration)))])])]),t.hasVehicle?s("div",{staticClass:"col-6 col-md-3 mt-3"},[s("div",{staticClass:"mb-2 value"},[t._v("Restzeit")]),s("h2",{staticClass:"value"},[t._v(" "+t._s(t.fmtShortDuration(t.chargeEstimate))+" "),s("small",{staticClass:"text-muted"},[t._v(t._s(t.fmtShortDurationUnit(t.chargeEstimate)))])])]):t._e()])},Bt=[],Ft={name:"LoadpointDetails",props:{chargedEnergy:Number,chargeDuration:Number,chargeEstimate:Number,chargePower:Number,climater:String,hasVehicle:Boolean,range:Number,socTimerActive:Boolean,socTimerSet:Boolean},mixins:[ot]},$t=Ft,Vt=Object(E["a"])($t,Lt,Bt,!1,null,null,null),Ot=Vt.exports,zt={methods:{collectProps:function(t){let e={};for(var s in t.props)e[s]=this[s];return e}}},It={name:"Loadpoint",props:{id:Number,multi:Boolean,pvConfigured:Boolean,title:String,mode:String,targetSoC:Number,socLevels:Array,remoteDisabled:Boolean,remoteDisabledSource:String,chargeDuration:Number,charging:Boolean,connected:Boolean,socTitle:String,socCharge:Number,minSoC:Number,socTimerSet:Boolean,socTimerActive:Boolean,chargePower:Number,chargedEnergy:Number,hasVehicle:Boolean,climater:String,range:Number,chargeEstimate:Number},components:{LoadpointDetails:Ot,Soc:yt,Mode:Mt,Vehicle:At},mixins:[ot,zt],data:function(){return{tickerHandle:null,chargeDurationDisplayed:null}},computed:{details:function(){return this.collectProps(Ot)},vehicle:function(){return this.collectProps(At)},hasTargetSoC:function(){return null!=this.socLevels&&this.socLevels.length>0}},watch:{chargeDuration:function(){window.clearInterval(this.tickerHandle),this.charging&&this.chargeDuration>=0&&(this.chargeDurationDisplayed=this.chargeDuration,this.tickerHandle=window.setInterval(function(){this.chargeDurationDisplayed+=1}.bind(this),1e3))}},methods:{api:function(t){return"loadpoints/"+this.id+"/"+t},setTargetMode:function(t){n.a.post(this.api("mode")+"/"+t).then(function(t){this.mode=t.data.mode}.bind(this)).catch(window.toasts.error)},setTargetSoC:function(t){n.a.post(this.api("targetsoc")+"/"+t).then(function(t){this.targetSoC=t.data.targetSoC}.bind(this)).catch(window.toasts.error)}},destroyed:function(){window.clearInterval(this.tickerHandle)}},Ut=It,Wt=Object(E["a"])(Ut,vt,ht,!1,null,null,null),qt=Wt.exports,Ht={name:"Site",props:{title:String,loadpoints:Array,gridConfigured:Boolean,gridPower:Number,pvConfigured:Boolean,pvPower:Number,batteryConfigured:Boolean,batteryPower:Number,batterySoC:Number},components:{SiteDetails:mt,Loadpoint:qt},mixins:[ot,zt],computed:{details:function(){return this.collectProps(mt)},multi:function(){return this.loadpoints.length>1}}},Rt=Ht,Kt=Object(E["a"])(Rt,at,it,!1,null,null,null),Gt=Kt.exports,Zt={name:"Main",components:{Site:Gt},data:function(){return this.$root.$data.store},computed:{configured:function(){const t=window.evcc.configured;return t==window.evcc.configured||!isNaN(parseInt(t))&&parseInt(t)>0}}},Jt=Zt,Qt=Object(E["a"])(Jt,et,st,!1,null,null,null),Xt=Qt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-4 border-bottom"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"h1"},[t._v(t._s(t.title||"Home"))])])]),s("div",{staticClass:"row h5"},[s("div",{staticClass:"col-md-4"}),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Netzzähler: "),t.gridConfigured?s("span",{staticClass:"text-primary"},[t._v("✓")]):s("span",{staticClass:"text-primary"},[t._v("—")])]),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" PV Zähler: "),t.pvConfigured?s("span",{staticClass:"text-primary"},[t._v("✓")]):s("span",{staticClass:"text-primary"},[t._v("—")])]),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Batteriezähler: "),t.batteryConfigured?s("span",{staticClass:"text-primary"},[t._v("✓")]):s("span",{staticClass:"text-primary"},[t._v("—")])])]),t._l(t.loadpoints,(function(e,a){return s("div",{key:a,attrs:{loadpoint:e,id:"loadpoint-"+a}},[s("div",{staticClass:"row mt-4 border-bottom"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"h1"},[t._v(t._s(e.title||"Ladepunkt"))])])]),s("div",{staticClass:"row h5"},[s("div",{staticClass:"col-md-4"}),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Ladezähler: "),e.chargeConfigured?s("span",{staticClass:"text-primary"},[t._v("✓")]):s("span",{staticClass:"text-primary"},[t._v("—")])]),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Phasen: "),s("span",{staticClass:"text-primary"},[t._v(t._s(e.phases)+"p")])]),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Min. Strom: "),s("span",{staticClass:"text-primary"},[t._v(t._s(e.minCurrent)+"A")])]),s("div",{staticClass:"col-6 col-md-2 py-3"},[t._v(" Max. Strom: "),s("span",{staticClass:"text-primary"},[t._v(t._s(e.maxCurrent)+"A")])])]),s("div",{staticClass:"row h5"},[s("div",{staticClass:"col-md-4"}),s("div",{staticClass:"col-md-8 h2"},[t._m(0,!0),s("div",{staticClass:"row h5"},[s("div",{staticClass:"col-6 py-3"},[t._v(" Modell: "),s("span",{staticClass:"text-primary"},[t._v(t._s(e.socTitle||"—"))])]),s("div",{staticClass:"col-6 py-3"},[t._v(" Kapazität: "),s("span",{staticClass:"text-primary"},[t._v(t._s(e.socCapacity)+"kWh")])])])])])])}))],2)},te=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row py-3 h2 border-bottom"},[s("div",{staticClass:"col-12"},[t._v("Fahrzeug")])])}],ee={name:"Config",data:function(){return this.$root.$data.store.state}},se=ee,ae=Object(E["a"])(se,Yt,te,!1,null,null,null),ie=ae.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-md-5 col-lg-4"},[s("Navigation")],1),s("div",{staticClass:"col-md-7 offset-lg-1 col-lg-7 py-3"},[s("router-view")],1)])])},re=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row mt-4 border-bottom"},[s("div",{staticClass:"col-12"},[s("h1",[t._v("Konfiguration")])])])}],oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-group sticky-top py-3"},[s("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/setup/site"}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-2"},[t._v("Hausinstallation")]),s("strong",{staticClass:"text-success"},[t._v("✓")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("Netzzähler")]),s("small",{staticClass:"text-muted"},[t._v("2,2 kW Bezug")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("PV Anlage")]),s("small",{staticClass:"text-muted"},[t._v("1,2 kW Produktion")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("Hausakku")]),s("small",{staticClass:"text-muted"},[t._v("43 % / -0.5 kW")])])]),s("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/setup/vehicles"}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-2"},[t._v("Fahrzeuge")]),s("strong",{staticClass:"text-success"},[t._v("✓")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("VW ID.3")]),s("small",{staticClass:"text-muted"},[t._v("lädt / 47%")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("Tesla Model 3")]),s("small",{staticClass:"text-muted"},[t._v("schläft / 90%")])])]),s("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/setup/loadpoints"}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-2"},[t._v("Ladepunkte")]),s("strong",{staticClass:"text-success"},[t._v("✓")])]),s("p",{staticClass:"mb-1"},[s("strong",[t._v("Carport")]),s("span",{staticClass:"d-flex w-100 justify-content-between"},[s("span",[t._v("NRGKick Connect")]),s("small",{staticClass:"text-muted"},[t._v("nicht verbunden")])])]),s("p",{staticClass:"mb-1"},[s("strong",[t._v("Garage")]),s("span",{staticClass:"d-flex w-100 justify-content-between"},[s("span",[t._v("KEBA X30")]),s("small",{staticClass:"text-muted"},[t._v("lädt / 11 kW")])])])]),s("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/setup/interfaces"}},[s("h5",{staticClass:"mb-2"},[t._v("Schnittstellen")]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("MQTT")]),s("small",{staticClass:"text-success"},[t._v("konfiguriert")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("InfluxDB")]),s("small",{staticClass:"text-muted"},[t._v("nicht konfiguriert")])])]),s("router-link",{staticClass:"list-group-item list-group-item-action",attrs:{to:"/setup/notifications"}},[s("h5",{staticClass:"mb-2"},[t._v("Benachrichtigungen")]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("Pushover")]),s("small",{staticClass:"text-success"},[t._v("konfiguriert")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("Telegram")]),s("small",{staticClass:"text-muted"},[t._v("nicht konfiguriert")])]),s("p",{staticClass:"mb-1 d-flex w-100 justify-content-between"},[s("span",[t._v("E-Mail")]),s("small",{staticClass:"text-muted"},[t._v("nicht konfiguriert")])])])],1)},le=[],ce={name:"Navigation"},ue=ce,de=(s("973e"),Object(E["a"])(ue,oe,le,!1,null,"82c0be82",null)),pe=de.exports,me={name:"Setup",components:{Navigation:pe}},ve=me,he=Object(E["a"])(ve,ne,re,!1,null,"5114e742",null),fe=he.exports,ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",{staticClass:"mb-4"},[t._v("Hausinstallation")]),t._l(t.sections,(function(e){return s("div",{key:e.key,staticClass:"border-top pt-4 my-4"},[s("div",{staticClass:"d-flex justify-content-between align-items-baseline mb-4"},[s("h5",{staticClass:"mb-0"},[t._v(" "+t._s(e.name)+" ")]),t.editMode!==e.key?s("button",{staticClass:"btn btn-link",on:{click:function(s){return s.preventDefault(),t.open(e.key)}}},[t._v(" konfigurieren ")]):t._e(),t.editMode===e.key?s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Beispielkonfiguration laden ")]),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},t._l(t.templates[e.key],(function(a){return s("button",{key:a.label,staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(s){return t.selectTemplate(e.key,a)}}},[t._v(" "+t._s(a.label)+" ")])})),0)]):t._e()]),t.editMode===e.key?s("Form",{attrs:{name:"Messgerät",meters:t.meters[e.key],"plugin-types":t.plugin,"save-endpoint":"/config/meters/"+e.key,"test-endpoint":"/config/test/meter/"+e.key},on:{close:t.close},model:{value:t.value[e.key],callback:function(s){t.$set(t.value,e.key,s)},expression:"value[section.key]"}}):t._e()],1)}))],2)},be=[],_e=s("b8db"),Ce={name:"Site",components:{Form:_e["default"]},data:function(){return{editMode:null,meters:{grid:[],pv:[],battery:[]},templates:{grid:[],pv:[],battery:[]},value:{grid:{},pv:{},battery:{}},plugin:[],sections:[{name:"Netzanschluss",key:"grid"},{name:"Erzeuger / Wechselrichter",key:"pv"},{name:"Batterie",key:"battery"}]}},methods:{open:function(t){this.editMode=t},close:function(){this.editMode=null},extractValues:function(t){return t.reduce((t,e)=>{const s=e.fields?this.extractValues(e.fields):e.default;return t[e.name]=s,t},{})},selectTemplate:function(t,e){this.value[t]=this.extractValues(e.fields)}},mounted:async function(){try{this.meters.grid=(await n.a.get("/config/types/meter/grid")).data,this.meters.pv=(await n.a.get("/config/types/meter/pv")).data,this.meters.battery=(await n.a.get("/config/types/meter/battery")).data,this.templates.grid=(await n.a.get("/config/templates/meter/grid")).data,this.templates.pv=(await n.a.get("/config/templates/meter/pv")).data,this.templates.battery=(await n.a.get("/config/templates/meter/battery")).data,this.plugin=(await n.a.get("/config/types/plugin")).data}catch(t){window.toasts.error(t)}}},ye=Ce,we=(s("61f9"),Object(E["a"])(ye,ge,be,!1,null,"b69fdc4c",null)),xe=we.exports,ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-start align-items-baseline mb-4"},[s("h2",[t._v("Fahrzeuge")]),s("a",{staticClass:"text px-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addVehicle(e)}}},[t._v("hinzufügen")])]),t._l(t.vehicles,(function(e,a){return s("div",{key:a,staticClass:"border-top pt-4 my-4"},[s("div",{staticClass:"d-flex justify-content-start align-items-baseline mb-4"},[s("h5",{staticClass:"mb-0"},[t._v(t._s(e.name))]),t.editMode!=="vehicle_"+a?s("a",{staticClass:"text px-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.open("vehicle_"+a)}}},[t._v(" ändern ")]):t._e()]),t.editMode==="vehicle_"+a?s("div",[s("Form",{attrs:{name:"Hersteller",meters:t.vehicleTypes,"plugin-types":t.plugin,"save-endpoint":"/config/vehicles/"+a,"test-endpoint":"/config/test/vehicle"},on:{close:t.close}}),s("div",{staticClass:"text-right"},[s("a",{staticClass:"text text-danger",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeVehicle(a)}}},[t._v(" Fahrzeug entfernen ")])])],1):s("div",{staticClass:"mb-3 mt-1"},[s("span",[t._v(" Ladestand: "+t._s(e.data.charge)+"%"),s("br"),t._v(" Status: "+t._s(e.data.state)+" ")])])])}))],2)},Se=[],Te={name:"Vehicles",components:{Form:_e["default"]},data:function(){return{editMode:void 0,vehicles:[{name:"VW ID.3",data:{charge:76,state:"lädt"}},{name:"Tesla Model 3",data:{charge:23,state:"sleeping"}}]}},mounted:async function(){try{this.vehicleTypes=(await n.a.get("/config/types/vehicle")).data,this.plugin=(await n.a.get("/config/types/plugin")).data}catch(t){window.toasts.error(t)}},methods:{open:function(t){this.editMode=t},close:function(){this.editMode=void 0},addVehicle:function(){const t={name:"VW ID.3",data:{charge:76,state:"lädt"}};this.vehicles=[...this.vehicles,t]},removeVehicle:function(t){this.close(),this.vehicles=this.vehicles.filter((e,s)=>s!==t)}}},Me=Te,De=(s("f997"),Object(E["a"])(Me,ke,Se,!1,null,"975818c6",null)),Pe=De.exports,Ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-start align-items-baseline mb-4"},[s("h2",[t._v("Ladepunkte")]),s("a",{staticClass:"text px-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addLoadpoint(e)}}},[t._v("hinzufügen")])]),t._l(t.loadpoints,(function(e,a){return s("div",{key:a,staticClass:"border-top pt-4 my-4"},[s("div",{staticClass:"d-flex justify-content-start align-items-baseline mb-4"},[s("h3",{staticClass:"mb-0"},[t._v(t._s(e.name))]),s("a",{staticClass:"text px-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.renameLoadpoint(a)}}},[t._v("umbenennen")])]),s("div",{staticClass:"d-flex justify-content-start align-items-baseline mt-4 mb-2"},[s("h5",{staticClass:"my-0"},[t._v("Wallbox")]),t.editMode!=="charger_"+a?s("a",{staticClass:"text px-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.open("charger_"+a)}}},[t._v(" ändern ")]):t._e()]),t.editMode==="charger_"+a?s("Form",{attrs:{name:"Hersteller",meters:t.chargerTypes,"plugin-types":t.pluginTypes,"save-endpoint":"/config/loadpoints/"+a+"/charger","test-endpoint":"/config/test/charger"},on:{close:t.close}}):s("div",{staticClass:"mb-3 mt-1"},[e.charger?s("span",[t._v(" "+t._s(e.charger.name)+" ")]):t._e()]),s("div",{staticClass:"d-flex justify-content-start align-items-baseline mt-4 mb-2"},[s("h5",{staticClass:"my-0"},[t._v("Messgerät")]),t.editMode!=="meter_"+a?s("a",{staticClass:"text px-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.open("meter_"+a)}}},[t._v(" ändern ")]):t._e()]),t.editMode==="meter_"+a?s("Form",{attrs:{name:"Hersteller",meters:t.meterTypes,"plugin-types":t.pluginTypes,"save-endpoint":"/config/loadpoints/"+a+"/meter/charge","test-endpoint":"/config/test/meter/charge"},on:{close:t.close}}):s("div",{staticClass:"mb-3 mt-1"},[e.meter?s("span",[t._v(" "+t._s(e.meter.name)+" ")]):t._e()]),s("div",{staticClass:"d-flex justify-content-start align-items-baseline mt-4 mb-2"},[s("h5",{staticClass:"my-0"},[t._v("Ladeverhalten")]),t.editMode!=="behaviour_"+a?s("a",{staticClass:"text px-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.open("behaviour_"+a)}}},[t._v(" ändern ")]):t._e()]),t.editMode==="behaviour_"+a?s("Form",{attrs:{fields:t.behaviourFields,"plugin-types":t.pluginTypes,"save-endpoint":"/config/loadpoints/"+a},on:{close:t.close}}):s("p",[t._v(" Modus: PV-only"),s("br"),t._v(" Ladeziel: 90% (sofort 20%)"),s("br"),t._v(" Ladeleistung: 6A bis 16A, 3-phasig"),s("br")]),t.loadpoints.length>1?s("div",[s("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeLoadpoint(a)}}},[t._v(" Ladedpunkt entfernen ")])]):t._e()],1)}))],2)},Ne=[],je={name:"Loadpoints",components:{Form:_e["default"]},data:function(){return{editMode:void 0,meterTypes:[],chargerTypes:[],loadpointConfig:[[]],pluginTyes:[],loadpoints:[{name:"Carport",charger:{name:"NRGKick Connect"},meter:{}},{name:"Garage",charger:{name:"KEBA X30"},meter:{}}]}},mounted:async function(){try{this.meterTypes=(await n.a.get("/config/types/meter/charge")).data,this.chargerTypes=(await n.a.get("/config/types/charger")).data,this.loadpointConfig=(await n.a.get("/config/loadpoints")).data,this.pluginTypes=(await n.a.get("/config/types/plugin")).data}catch(t){window.toasts.error(t)}},computed:{behaviourFields:function(){return this.loadpointConfig[0].filter(t=>"Title"!==t.name)}},methods:{open:function(t){this.editMode=t},close:function(){this.editMode=void 0},addLoadpoint:function(){const t={name:"Ladepunkt",charger:void 0};this.loadpoints=[...this.loadpoints,t]},removeLoadpoint:function(t){this.loadpoints=this.loadpoints.filter((e,s)=>s!==t)}}},Ae=je,Le=(s("6fe5"),Object(E["a"])(Ae,Ee,Ne,!1,null,"99b67574",null)),Be=Le.exports,Fe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Schnittstellen")]),s("div",{staticClass:"card"},[s("div",{staticClass:"card-header card-header-with-link"},[s("h4",{staticClass:"mb-0"},[t._v("Schnittstellen")])]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v("MQTT")]),s("p",{staticClass:"card-text"},[t._v("nicht konfiguriert "),s("a",{attrs:{href:"#"}},[t._v("ändern")])]),s("h5",{staticClass:"card-title"},[t._v(" InfluxDB "),s("span",{staticClass:"float-right text-right"},[s("small",{staticClass:"text-success"},[t._v("verbunden")])])]),s("p",{staticClass:"card-text"},[t._v("https://influx.local/ "),s("a",{attrs:{href:"#"}},[t._v("ändern")])])])])])}],Ve={name:"Interfaces"},Oe=Ve,ze=(s("2693"),Object(E["a"])(Oe,Fe,$e,!1,null,"b40b04ea",null)),Ie=ze.exports,Ue=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},We=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("Benachrichtigungen")]),s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h4",{staticClass:"mb-0"},[t._v("Benachrichtigung")])]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v("Pushover")]),s("p",{staticClass:"card-text"},[t._v("nicht konfiguriert "),s("a",{attrs:{href:"#"}},[t._v("ändern")])]),s("h5",{staticClass:"card-title"},[t._v("Telegram")]),s("p",{staticClass:"card-text"},[t._v("nicht konfiguriert "),s("a",{attrs:{href:"#"}},[t._v("ändern")])]),s("h5",{staticClass:"card-title"},[t._v("E-Mail")]),s("p",{staticClass:"card-text"},[t._v("nicht konfiguriert "),s("a",{attrs:{href:"#"}},[t._v("ändern")])])])])])}],qe={name:"Notifications"},He=qe,Re=Object(E["a"])(He,Ue,We,!1,null,"5eb7f3b0",null),Ke=Re.exports,Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},t._l(t.tabs,(function(e,a){return s("li",{key:a,staticClass:"nav-item",attrs:{role:"presentation"}},[s("a",{staticClass:"nav-link",class:{active:"meter"==a},attrs:{"data-toggle":"tab",role:"tab",href:"#"+a,id:a+"-tab"}},[t._v(t._s(e))])])})),0),s("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},t._l(t.tabs,(function(e,a){return s("div",{key:a,staticClass:"tab-pane fade show",class:{active:"meter"==a},attrs:{role:"tabpanel",id:a}},[s("TypeSelector",{attrs:{klass:a,plugins:t.plugins}})],1)})),0)])},Ze=[],Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row my-3"},[s("div",{staticClass:"col"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?s:s[0]}}},t._l(t.types,(function(e,a){return s("option",{key:e.type,domProps:{value:a,selected:a==t.type}},[t._v(" "+t._s(e.label)+" ")])})),0)])]),s("FieldSet",t._b({ref:"fields",attrs:{klass:t.klass,plugins:t.plugins}},"FieldSet",t.types[t.type],!1))],1)},Qe=[],Xe=s("1a33"),Ye={name:"TypeSelector",components:{FieldSet:Xe["default"]},props:{klass:String,plugins:Array},data:function(){return{types:[],type:0}},watch:{type:function(){this.$refs.fields.clearStatus()}},mounted:async function(){try{this.types=(await n.a.get("/config/types/"+this.klass)).data}catch(t){window.toasts.error(t)}}},ts=Ye,es=Object(E["a"])(ts,Je,Qe,!1,null,null,null),ss=es.exports,as={name:"Config",components:{TypeSelector:ss},data:function(){return{plugins:[]}},computed:{tabs:function(){return{meter:"Meter",charger:"Charger",vehicle:"Vehicle",plugin:"Plugin"}}},mounted:async function(){try{this.plugins=(await n.a.get("/config/types/plugin")).data}catch(t){window.toasts.error(t)}}},is=as,ns=Object(E["a"])(is,Ge,Ze,!1,null,null,null),rs=ns.exports;a["a"].use(tt["a"]);const os=[{path:"/",component:Xt},{path:"/config",component:ie},{path:"/setup",component:fe,redirect:"/setup/site",children:[{path:"site",component:xe},{path:"vehicles",component:Pe},{path:"loadpoints",component:Be},{path:"interfaces",component:Ie},{path:"notifications",component:Ke}]},{path:"/testing",component:rs}];var ls=new tt["a"]({routes:os,linkExactActiveClass:"active"});const cs=window.location;n.a.defaults.baseURL=cs.protocol+"//"+cs.hostname+(cs.port?":"+cs.port:"")+cs.pathname+"api",n.a.defaults.headers.post["Content-Type"]="application/json",window.toasts=new a["a"]({el:"#toasts",render:function(t){return t(Y,{props:{items:this.items,count:this.count}})},data:{items:{},count:0},name:"ToastsRoot",methods:{raise:function(t){let e=!1;Object.keys(this.items).forEach((function(s){let a=this.items[s];a.type==t.type&&a.message==t.message&&(e=!0)}),this),e||(t.id=this.count++,a["a"].set(this.items,t.id,t))},error:function(t){t.type="error",this.raise(t)},warn:function(t){t.type="warn",this.raise(t)},remove:function(t){a["a"].delete(this.items,t.id)}}}),new a["a"]({el:"#app",router:ls,data:{store:B},render:t=>t(O)}),window.setInterval((function(){n.a.get("health").catch((function(t){t.message="Server unavailable",window.toasts.error(t)}))}),5e3)},b19f:function(t,e,s){},b557:function(t,e,s){},b8db:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.meters?s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"wechselrichter"}},[t._v(" "+t._s(t.name)+" ")]),s("div",{staticClass:"col-sm-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.value.Type,expression:"value.Type"}],staticClass:"custom-select",attrs:{id:"wechselrichter"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.value,"Type",e.target.multiple?s:s[0])}}},t._l(t.meters,(function(e){return s("option",{key:e.type,domProps:{value:e.type}},[t._v(" "+t._s(e.label)+" ")])})),0)])]):t._e(),t._l(t.formFields,(function(e){return s("FormField",t._b({key:e.name,attrs:{value:t.value[e.name],"plugin-types":t.pluginTypes}},"FormField",e,!1))})),t.testMessage?s("div",{staticClass:"alert alert-success",class:{"alert-success":t.testSuccess,"alert-danger":!t.testSuccess}},[t._v(" "+t._s(t.testMessage)+" ")]):t._e(),s("div",{staticClass:"d-flex justify-content-between flex-row-reverse"},[s("div",[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",name:"btn-test"}},[t._v(" testen "),t.testPending?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e()]),t._v(" "),t.saveEndpoint?s("button",{staticClass:"btn",class:{"btn-outline-primary":!t.testSuccess,"btn-success":t.testSuccess},attrs:{type:"submit",name:"btn-save",disabled:!t.testSuccess}},[t._v(" speichern ")]):t._e()]),t.saveEndpoint?s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" abbrechen ")]):t._e()])],2)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["hidden"===t.inputType?s("input",{attrs:{type:"hidden",name:t.name},domProps:{value:""+t.value}}):s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:t.name}},[t._v(" "+t._s(t.label)),t.required?s("small",[t._v("*")]):t._e()]),s("div",{staticClass:"col-sm-9"},["subform"!==t.inputType||t.required?t._e():s("div",{staticClass:"my-2 custom-control custom-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.subformEnabled,expression:"subformEnabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.name},domProps:{checked:Array.isArray(t.subformEnabled)?t._i(t.subformEnabled,null)>-1:t.subformEnabled},on:{change:function(e){var s=t.subformEnabled,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=t._i(s,n);a.checked?r<0&&(t.subformEnabled=s.concat([n])):r>-1&&(t.subformEnabled=s.slice(0,r).concat(s.slice(r+1)))}else t.subformEnabled=i}}}),s("label",{staticClass:"custom-control-label",attrs:{for:t.name}},[t.subformEnabled?s("span",[t._v("aktiv")]):s("span",[t._v("inaktiv")])])]),"text"===t.inputType?s("input",{staticClass:"form-control",attrs:{type:"text",name:t.name,id:t.name},domProps:{value:t.value}}):t._e(),"password"===t.inputType?s("input",{staticClass:"form-control",attrs:{type:"password",name:t.name,id:t.name}}):t._e(),"plugin"===t.inputType?s("div",{staticClass:"py-2"},[t._v("freie Konfiguration")]):t._e(),"number"===t.inputType?s("div",{staticClass:"input-group",staticStyle:{width:"50%"}},[s("input",{staticClass:"form-control",attrs:{type:"number",name:t.name,id:t.name},domProps:{value:t.value}}),t.unit?s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v(t._s(t.unit))])]):t._e()]):t._e(),"duration"===t.inputType?s("div",{staticClass:"input-group",staticStyle:{width:"50%"}},[s("input",{staticClass:"form-control",attrs:{type:"number",name:t.name,id:t.name},domProps:{value:t.value}}),t._m(0)]):t._e(),"yes_no"===t.inputType?s("div",{staticClass:"my-2 custom-control custom-switch"},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.name},domProps:{checked:"true"!==t.value}}),s("label",{staticClass:"custom-control-label",attrs:{for:t.name}},["true"!==t.value?s("span",[t._v("aktiv")]):s("span",[t._v("inaktiv")])])]):t._e(),"select"===t.inputType?s("select",{staticClass:"custom-select",attrs:{name:t.name,id:t.name}},[t.required?t._e():s("option",{attrs:{value:""}},[t._v("- bitte wählen -")]),t._l(t.enumValues,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),"inline_radio"===t.inputType?s("div",{staticClass:"py-2"},t._l(t.enumValues,(function(e){return s("div",{key:e,staticClass:"custom-control custom-radio custom-control-inline",attrs:{value:e}},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:t.name+"_"+e,name:t.name},domProps:{value:e,checked:e===e}}),s("label",{staticClass:"custom-control-label",attrs:{for:t.name+"_"+e}},[t._v(" "+t._s(e)+" ")])])})),0):t._e()])]),"plugin"===t.inputType?s("div",{staticClass:"px-4 pt-4 pb-2 mb-4 border"},[s("Form",{attrs:{name:"Protokoll",meters:t.pluginTypes,"plugin-types":t.pluginTypes,value:t.value,"test-endpoint":"/config/test/plugin"}})],1):t._e(),"subform"===t.inputType?s("div",{directives:[{name:"show",rawName:"v-show",value:t.subformEnabled||t.required,expression:"subformEnabled || required"}],staticClass:"px-4 pt-4 pb-2 mb-4 subform"},t._l(this.children,(function(e){return s("FormField",t._b({key:e.name,attrs:{"plugin-value":t.value.Type,name:t.name+"."+e.name}},"FormField",e,!1))})),1):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text"},[t._v("s")])])}],o={name:"FormField",components:{Form:()=>Promise.resolve().then(s.bind(null,"b8db"))},props:{name:String,type:String,required:Boolean,hidden:Boolean,masked:Boolean,label:String,unit:String,pluginTypes:Array,enum:Array,children:Array,value:[String,Object,Number,Boolean]},data:function(){return{subformEnabled:!1}},computed:{enumValues:function(){return this.enum},inputType:function(){return this.hidden?"hidden":this.enum?this.enum.length<5&&this.enum.join("").length<20?"inline_radio":"select":"password"===this.type?"password":"struct"===this.type?"subform":"duration"===this.type?"duration":"bool"===this.type?"yes_no":"plugin"===this.type?"plugin":"int"===this.type||"uint8"===this.type||"int64"===this.type||"float64"===this.type?"number":"text"}}},l=o,c=(s("053d"),s("2877")),u=Object(c["a"])(l,n,r,!1,null,"61fdfa65",null),d=u.exports,p=s("bc3a"),m=s.n(p);function v(t){var e={};for(var s in t){var a=s.split(".");a.reduce((function(e,i,n){return e[i]||(e[i]=isNaN(Number(a[n+1]))?a.length-1==n?t[s]:{}:[])}),e)}return e}var h={name:"Form",components:{FormField:d},data:function(){return{edit:"",extended:!1,selectedMeter:"sma",testMessage:null,testSuccess:!1,testPending:!1,savePending:!1,testRequestCancelToken:null}},props:{name:{type:String},testEndpoint:{type:String},saveEndpoint:{type:String},value:{type:Object,default:()=>({})},fields:{type:Array},meters:{type:Array},pluginTypes:{type:Array}},computed:{formFields:function(){if(this.fields)return this.fields;const t=this.meters.find(t=>t.type===this.value.Type);return t?t.fields:[]}},methods:{formToJson:function(t){const e=new FormData(t);var s={};return e.forEach((t,e)=>s[e]=t),v(s)},submit:function(t){const{submitter:e,target:s}=t,a=this.formToJson(s);"btn-test"===e.name?this.test(a):this.save(a)},test:async function(t){if(this.testRequestCancelToken)this.testRequestCancelToken.cancel();else{this.testMessage=null,this.testPending=!0,this.testRequestCancelToken=m.a.CancelToken.source();try{const e=await m.a.post(this.testEndpoint,t,{validateStatus:void 0,cancelToken:this.testRequestCancelToken.token});this.testMessage=e.data,this.testSuccess=e.status<400}catch(e){console.log("test call canceled"),this.testMessage=null,this.testSuccess=!1}this.testPending=!1,this.testRequestCancelToken=null}},save:async function(t){try{await m.a.post(this.saveEndpoint,t),this.tested=!1}catch(e){console.error(e),this.tested=!1}}}},f=h,g=Object(c["a"])(f,a,i,!1,null,null,null);e["default"]=g.exports},c73a:function(t,e,s){},d656:function(t,e,s){},d68a:function(t,e,s){},f997:function(t,e,s){"use strict";s("d656")}});
//# sourceMappingURL=index.8d11ecd7.js.map